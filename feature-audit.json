[
  {
    "id": "background-system",
    "name": "Global Background & Theme Layer",
    "category": "presentation",
    "files": ["components/DynamicHero.tsx", "lib/adminSettings.client.ts", "THEME_BACKGROUND_ENHANCEMENT.md", "GLOBAL_BG_* settings"],
    "flags": ["GLOBAL_BG_MODE", "GLOBAL_BG_IMAGE_STYLE", "GLOBAL_BG_IMAGE_POSITION", "GLOBAL_BG_IMAGE_OVERLAY_SCOPE"],
    "status": "active",
    "risk": "low",
    "needsValidation": ["Dark-mode white flash eliminated", "Overlay scope alignment on all breakpoints"],
    "nextActions": ["Cross-page consistency check", "Add automated visual regression snapshot"],
    "dependsOn": ["public/background API"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "members-classification",
    "name": "Core Team & Sekbid Classification",
    "category": "data-integrity",
    "files": ["components/PeopleSectionsClient.tsx", "app/api/members/route.ts", "supabase-schema.sql"],
    "flags": ["role regex patterns"],
    "status": "active",
    "risk": "medium",
    "needsValidation": ["All leadership variants matched", "No core roles leak into sekbid groups"],
    "nextActions": ["Add unit tests for role parsing", "Add monitoring for unmatched roles"],
    "dependsOn": ["members table"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "api-standardization",
    "name": "Uniform API Response & Caching",
    "category": "platform",
    "files": ["lib/validation.ts", "app/api/public/background/route.ts", "app/api/members/route.ts"],
    "flags": ["ETag", "Cache-Control", "Zod validation"],
    "status": "active",
    "risk": "low",
    "needsValidation": ["Error code taxonomy coverage", "Stale-while-revalidate behavior"],
    "nextActions": ["Propagate to remaining public endpoints", "Add automated schema contract tests"],
    "dependsOn": ["Node runtime", "Supabase"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "ai-chat-system",
    "name": "AI Chat & Live Widget",
    "category": "ai",
    "files": ["components/chat/LiveChatWidget.tsx", "app/api/ai/chat/route.ts", "disable-ai-features.sql"],
    "flags": ["rate limit", "feature disable script"],
    "status": "partial",
    "risk": "medium",
    "needsValidation": ["Rate limiting enforced", "Disable script toggles all endpoints"],
    "nextActions": ["Centralize feature flag storage", "Add abuse monitoring"],
    "dependsOn": ["Supabase keys", "OpenAI/vision provider"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "ai-vision",
    "name": "AI Vision Endpoint",
    "category": "ai",
    "files": ["app/api/ai/vision/route.ts", "AI_VISION_GUIDE.md"],
    "flags": ["model selection"],
    "status": "partial",
    "risk": "medium",
    "needsValidation": ["Image size limits", "Error normalization"],
    "nextActions": ["Add schema validation via central module", "Add usage metrics"],
    "dependsOn": ["External vision models"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "image-generation",
    "name": "Image Generation Pipeline",
    "category": "ai",
    "files": ["IMAGE_GENERATION_COMPLETE.md", "IMAGE_GENERATION_ENHANCEMENT_GUIDE.md"],
    "flags": ["rate limit mention"],
    "status": "active",
    "risk": "low",
    "needsValidation": ["Generation quality metrics tracked"],
    "nextActions": ["Add cache for repeated prompts", "Centralize error codes"],
    "dependsOn": ["AI provider"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "runtime-config",
    "name": "Dynamic Runtime Configuration",
    "category": "configuration",
    "files": ["RUNTIME_CONFIG_GUIDE.md", "DONE_RUNTIME_CONFIG.md", "next.config.js"],
    "flags": ["env mapping"],
    "status": "active",
    "risk": "low",
    "needsValidation": ["All required env keys present in production"],
    "nextActions": ["Automated drift detection", "Secure secret rotation guide"],
    "dependsOn": ["Process env"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "error-logging",
    "name": "Client & Server Error Logging",
    "category": "observability",
    "files": ["lib/clientErrorLogger.ts", "ERROR_LOGS_SETUP_GUIDE.md", "create_error_logs_table.sql"],
    "flags": ["error log table"],
    "status": "partial",
    "risk": "medium",
    "needsValidation": ["Client errors captured", "Sensitive data not logged"],
    "nextActions": ["Add sampling", "Add alert thresholds"],
    "dependsOn": ["Supabase"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "password-reset-flow",
    "name": "Password Reset & Verification",
    "category": "auth",
    "files": ["create_password_resets_table.sql", "PASSWORD_RESET_DATABASE_SETUP.md", "create_email_verifications_table.sql"],
    "flags": ["reset token storage"],
    "status": "active",
    "risk": "medium",
    "needsValidation": ["Token expiry enforced", "Replay protection"],
    "nextActions": ["Add rate limiting", "Add audit trail"],
    "dependsOn": ["Supabase auth"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "posts-system",
    "name": "Public Posts Listing & Detail",
    "category": "content",
    "files": ["app/posts/page.tsx", "app/posts/[slug]/page.tsx", "app/api/admin/posts/route.ts"],
    "flags": ["pagination placeholder"],
    "status": "partial",
    "risk": "low",
    "needsValidation": ["SEO meta populated", "Pagination stable"],
    "nextActions": ["Add public caching headers", "Schema validation for post detail"],
    "dependsOn": ["posts table"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "role-rbac-system",
    "name": "RBAC & Role Management",
    "category": "security",
    "files": ["AI_SYSTEM_RBAC.md", "ROLE_MANAGEMENT_GUIDE.md", "RBAC_GUIDE.md"],
    "flags": ["role enforcement"],
    "status": "partial",
    "risk": "high",
    "needsValidation": ["All restricted endpoints enforce role", "No privilege escalation"],
    "nextActions": ["Add automated RBAC tests", "Centralize role constants"],
    "dependsOn": ["Supabase policies"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "data-sync",
    "name": "Data Sync & Filter Pipeline",
    "category": "data",
    "files": ["DATA_SYNC_COMPLETE.md", "DATA_FILTER_COMPLETE.md", "FINAL_SYNC_FIX.md"],
    "flags": ["sync status markers"],
    "status": "active",
    "risk": "medium",
    "needsValidation": ["No stale sync markers", "Filters applied consistently"],
    "nextActions": ["Add sync health dashboard"],
    "dependsOn": ["multiple tables"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "admin-panel",
    "name": "Admin Panel Feature Set",
    "category": "admin",
    "files": ["ADMIN_PANEL_STATUS.md", "ADMIN_API_IMPLEMENTATION.md", "app/admin/data/members/page.tsx"],
    "flags": ["panel readiness"],
    "status": "partial",
    "risk": "high",
    "needsValidation": ["All write actions gated", "No leakage of private data"],
    "nextActions": ["Integrate API standardization to all admin endpoints", "Add role badges"],
    "dependsOn": ["RBAC", "members"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "registration-flow",
    "name": "User Registration & Approval",
    "category": "auth",
    "files": ["REGISTRATION_GUIDE.md", "app/api/auth/register/route.ts"],
    "flags": ["email verification dependency"],
    "status": "partial",
    "risk": "medium",
    "needsValidation": ["Duplicate email prevention", "Proper validation errors"],
    "nextActions": ["Add rate limiting", "Integrate central error codes"],
    "dependsOn": ["email verification tables"],
    "lastChange": "2025-11-23"
  },
  {
    "id": "latest-posts-widget",
    "name": "Homepage Latest Posts Section",
    "category": "presentation",
    "files": ["components/LatestPostsSection.tsx"],
    "flags": ["loading strategy"],
    "status": "partial",
    "risk": "low",
    "needsValidation": ["No layout shift", "Fallback states styled"],
    "nextActions": ["Add skeleton loader", "Add prefetch hints"],
    "dependsOn": ["posts API"],
    "lastChange": "2025-11-23"
  }
  ,
  {
    "id": "theme-language-preferences",
    "name": "Global Theme & Language Preferences",
    "category": "presentation",
    "files": [
      "app/globals.css",
      "app/api/user/preferences/route.ts",
      "app/context/ThemeContext.tsx",
      "app/context/LanguageContext.tsx",
      "add_user_preferences.sql",
      "app/admin/login/page.tsx",
      "components/AdminHeader.tsx"
    ],
    "flags": ["theme persistence", "language persistence", "global toggles"],
    "status": "active",
    "risk": "low",
    "needsValidation": [
      "Server preference fetch pre-hydration",
      "Contrast accessibility on login & form inputs",
      "Consistent token usage across all admin components"
    ],
    "nextActions": [
      "Preload preferences in root layout",
      "Automated light/dark snapshot tests",
      "Token adoption audit across remaining components"
    ],
    "dependsOn": ["users table", "preferences API"],
    "lastChange": "2025-11-23"
  }
]
